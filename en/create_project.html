<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>

<head>
  <meta name="keywords" content="OpenHRP,OpenHRP3,robot,Distributed component type robot simulator,corba"> 
  <meta name="description" content="OpenHRP official site"> 

 <title>Creating Simulation Project</title>

 <meta http-equiv="content-type" content="text/html; charset=UTF-8">
 <meta http-equiv="content-style-type" content="text/css">
 <meta http-equiv="content-script-type" content="text/javascript">

 <link rel="stylesheet" href="../style/default.css" type="text/css" media="screen" charset="Shift_JIS" />
 <link rel="stylesheet" href="../style/print.css" type="text/css" media="print" charset="Shift_JIS" />
 <link rel="stylesheet" href="../style/greybox/greybox.css" type="text/css" media="all" charset="Shift_JIS" />
 <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />

</head>

<body>

<div id="header">

 <a href="../index.html">
  <img id="logo" src="../image/openhrp3banner.jpg" width="200" height="94" alt="OpenHRP3" title="OpenHRP3" />
 </a>

   <h1 class="title">Creating Simulation Project</h1><br>
   <div align="right"><a href="../jp/index.html">Japanese &gt;&gt;</a></div>
</div>


<div id="navigator"> 
<hr class="full_hr" /></div>


<div id="contents">
<table class="contents" width="100%" border="0" cellspacing="0" cellpadding="0">
 <tr>
  <td class="ltable" valign="top"><div id="menubar">

   <h2 id="h2_content_1">Introduction</h2>
    <ul class="menu">
     <li><a href="../en/index.html">Home</a></li>
     <li><a href="../en/about.html">About OpenHRP3</a></li>
     <li><a href="../en/download.html">Downloads</a></li>
    </ul>

   <h2 id="h2_content_2">Documents</h2>
    <ul class="menu">
     <li><a href="../en/install.html">Installation<br>(Ver.3.1.4)</a></li>
     <li><a href="../en/install_3_0.html">Installation<br>(Ver.3.0.8)</a></li>
     <li><a href="../en/users_manual.html">Users Manual<br>(Ver.3.1.4)</a></li>
     <li><a href="../en/users_manual_3_0.html">Users Manual<br>(Ver.3.0.8)</a></li>
     <li><a href="../en/programming.html">Programming Manual</a></li>

<!--
     <li><a href="../en/reference_manuals.html">Reference Manual</a></li>
-->
    </ul>

   <h2 id="h2_content_3">Supplements</h2>
    <ul class="menu">
     <li><a href="../en/samples.html">Sample Movies</a></li>
     <li><a href="../en/tips.html">Tips</a></li>
     <li><a href="../en/troubleshooting.html">Troubleshooting<br>(Ver.3.1)</a></li>
     <li><a href="../en/troubleshooting_3_0.html">Troubleshooting<br>(Ver.3.0)</a></li>
     <li><!--<a href="../en/known_bugs.html">-->Known Bugs<!--</a>--></li>
     <li><a href="../en/papers.html">Related Papers</a></li>
    </ul>

   <h2 id="h2_content_4">Support</h2>
    <ul class="menu">
     <li>
       <a href="../en/forum.html">Users Forum</a></li>
     </ul>


   <h2 id="h2_content_5">Related Sites</h2>
    <ul class="menu">
     <li><a href="http://www.openrtm.org/openrtm/en" target="_blank">OpenRTM-aist</a></li>
     <!--<li><a href="http://www.is.aist.go.jp/humanoid/openhrp/English/indexE.html" target="_blank">OpenHRP2 (prior version)</a></li>-->
    </ul>

   <h2 id="h2_content_2_0">Archived Docs</h2>
    <ul class="menu">
     <li><a href="../en/old_versions.html">OpenHRP3 Old Ver</a></li>

</div></td>

  <td class="ctable" valign="top">

   <div id="body">


<h2> Project </h2>

<p>
Here we describe the building steps of a simulation project, by using GrxUI. 
First, start GrxUI</a>.
</p>
<h3> Preparation </h3>
If other projects are already read, select "New Project" from the GrxUI menu, or select "create Project" from a right-click for the project item of Item View, and create a new project. 
<p align="center">
<img src="../img_new/create_project.png"><br>


<h3> Model </h3>

<p>
In this sample, we are going to create a simulation project of a walking robot.<br>
Which means we have to have at least 2 models; the robot model and floor.
</p>

<p>
First, Right-click on "Model" in <a href="./um_item_view.html">"Item View"</a> panel, and select "Load".<br>
Load "sample.wrl" and "floor.wrl", placed in <i>"OpenHRP3/sample/model"</i> folder.<br>
Then, right-click on model "floor" and select "change into environment model";<br>
so that floor can be specified as an environmental model.
</p>

<p>
Now we specify the initial posture of the robot.<br> 
For that, set the properties of the sample model using 
<a href="./um_property_view.html">Property View</a> as you can see in Fig.1 . Table.1 shows the 
input values more specifically.
</p>

<p>
<center>
<img src="../img_new/GrxUI_EditProperty.png"><br>
Fig.1 : Property editing steps
</center>
</p>

<p align="center">
Table.1 : Sample robot properties<br>
<table align="center" border="1">
<tr><td>CHEST.angle</td><td>0.0</td></tr>
<tr><td>LARM_ELBOW.angle</td><td>-1.5708</td></tr>
<tr><td>LARM_SHOULDER_P.angle</td><td>0.174533</td></tr>
<tr><td>LARM_SHOULDER_R.angle</td><td>-0.003490</td></tr>
<tr><td>LARM_SHOULDER_Y.angle</td><td>0.0</td></tr>
<tr><td>LARM_WRIST_P.angle</td><td>0.0</td></tr>
<tr><td>LARM_WRIST_R.angle</td><td>0.0</td></tr>
<tr><td>LARM_WRIST_Y.angle</td><td>0.0</td></tr>
<tr><td>LLEG_ANKLE_P.angle</td><td>-0.0424675</td></tr>
<tr><td>LLEG_ANKLE_R.angle</td><td>0.0</td></tr>
<tr><td>LLEG_HIP_P.angle</td><td>-0.0360373</td></tr>
<tr><td>LLEG_HIP_R.angle</td><td>0.0</td></tr>
<tr><td>LLEG_HIP_Y.angle</td><td>0.0</td></tr>
<tr><td>LLEG_KNEE.angle</td><td>0.0785047</td></tr>
<tr><td>RARM_ELBOW.angle</td><td>-1.5708</td></tr>
<tr><td>RARM_SHOULDER_P.angle</td><td>0.174533</td></tr>
<tr><td>RARM_SHOULDER_R.angle</td><td>-0.003490</td></tr>
<tr><td>RARM_SHOULDER_Y.angle</td><td>0.0</td></tr>
<tr><td>RARM_WRIST_P.angle</td><td>0.0</td></tr>
<tr><td>RARM_WRIST_R.angle</td><td>0.0</td></tr>
<tr><td>RARM_WRIST_Y.angle</td><td>0.0</td></tr>
<tr><td>RLEG_ANKLE_P.angle</td><td>-0.0424675</td></tr>
<tr><td>RLEG_ANKLE_R.angle</td><td>0.0</td></tr>
<tr><td>RLEG_HIP_P.angle</td><td>-0.0360373</td></tr>
<tr><td>RLEG_HIP_R.angle</td><td>0.0</td></tr>
<tr><td>RLEG_HIP_Y.angle</td><td>0.0</td></tr>
<tr><td>RLEG_KNEE.angle</td><td>0.0785047</td></tr>
<tr><td>WAIST.rotation</td><td>0.0 1.0 0.0 0.0</td></tr>
<tr><td>WAIST.translation</td><td>0.0 0.0 0.713</td></tr>
<tr><td>WAIST_P.angle</td><td>0.0</td></tr>
<tr><td>WAIST_R.angle</td><td>0.0</td></tr>
</table>


<h3> WorldState </h3>

<p>
Here we create "WorldState" and configure the parameters.<br>
Right-click "WorldState" in the "Item View" panel, and select "create".
</p>

<p align="center">
<img src="../img_new/GrxUI_CreateWorldState.png"><br>
Fig.2 : WorldState
</p>

<p>
Select Simulation View. Set each parameters 
as described in Table.2 .
</p>

<p align="center">
Table.2 : Simulation Parameters<br>
<table align="center" border="1">
<tr><td>Total Times[s]</td><td>13.4</td></tr>
<tr><td>Integration Step[s]</td><td>0.0020</td></tr>
<tr><td>Logging Step[s]</td><td>0.0020</td></tr>
<tr><td>Integration Method</td><td>RUNGE_KUTTA</td></tr>
<tr><td>Gravity[ms<sup>-2</sup>]</td><td>9.8</td></tr>
</table>
</p>

<p align="center">
<img src="../img_new/GrxUI_SimulationParameters.png"><br>
Fig.3 : Simulation Parameters
</p>


<h3> Collision Pair </h3>

<p>
Here we are going to specify the collision check between floor and robot; (We call them "Collision pair").<br>
First, select "Collision Pair View".
</p>

<p align="center">
<img src="../img_new/GrxUI_CollisionPairAdd.png"><br>
Fig.4 : Collision Pair View
</p>

<p>
Now Click "Add" button. Select "sample" as Object1, and "floor" as Object2, and then click "OK" 
button.
</p>

<p align="center">
<img src="../img_new/GrxUI_InsertCollisionPair.png"><br>
Fig.5 : Addding Collision Pair
</p>


<h3> Controller</h3>

<p>
Now we configure the controller.<br>
Select "Controller View".<br>
Note:<br>
Refer to <a href="./controller_pd.html">Controller Building Guide</a> for the creation method of a controller. 
Here, how to specify the controller of the sample already created is explained. 
</p>

<p>
Choose Sample from the list of robots by Controller View, and push the Edit button.
</p>
<p align="center">
<img src="../img_new/GrxUI_Controller.png"><br>
Fig.6 : Controller View
</p>

<p>
Specify controller parameters as described in Table.3 .<br>
If "SamplePDController" is not available at there to select, please enter by your self.<br>
Control Time is a time interval which performs a controller. Please set up the value more than the integration interval of a simulation. <br>
As shown in a figure, please choose Working Dir and Setup Command using a file selection dialog, or as shown in Table 3, specify them using an environment variable. 
</p>

<p align="center">
Table.3 : Controller Parameters<br>
<table align="center" border="1">
<tr><td>Controller</td><td>SamplePDController</td></tr>
<tr><td>Control Time[s]</td><td>0.002</td></tr>
<tr><td>Working Dir.</td><td>$(PROJECT_DIR)/../controller/SamplePD</td></tr>
<tr><td>Setup Command</td><td>SamplePD$(BIN_SFX)</td></tr>
</table>
</p>

<p align="center">
<img src="../img_new/GrxUI_SetController.png"><br>
Fig.7 : Controller View
</p>

<h3 id="startsimulation"> Simulation</h3>

<p>
Now we are going to start simulation process by executing the created controller-component.
</p>

<p>
For that, just click on "Start simulation" button in GrxUI, as shown in Fig.8 .
</p>

<p align="center">
<img src="../img_new/GrxUI_StartSimulation.png"><br>
Fig.8 : Start simulation
</p>


<h3>Saving Project File</h3>

<p>
you can save the created project file, by selecting "Save Project" from 
<a href="./um_grxui_menu.html">GrxUI menu</a>.
</p>
<br>







</div>
  </td>
 </tr>
</table>
</div>



<hr class="full_hr" />



<div id="footer">
<table id="footertable" border="0" cellspacing="0" cellpadding="0">
<tr>
 <td id="footerctable"><div id="sigunature">
  Administrator: OpenHRP Team, 
  Humanoid Research Group, Intelligent Systems Research Institute, AIST
 </div></td>
</tr>
</table>
</div>

</body>
</html>
