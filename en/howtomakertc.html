<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>

<head>
  <meta name="keywords" content="OpenHRP,OpenHRP3,robot,Distributed component type robot simulator,corba"> 
  <meta name="description" content="OpenHRP official site"> 

 <title>Making periodically execute RT component synchronized with simulation time</title>

 <meta http-equiv="content-type" content="text/html; charset=UTF-8">
 <meta http-equiv="content-style-type" content="text/css">
 <meta http-equiv="content-script-type" content="text/javascript">

 <link rel="stylesheet" href="../style/default.css" type="text/css" media="screen" charset="Shift_JIS" />
 <link rel="stylesheet" href="../style/print.css" type="text/css" media="print" charset="Shift_JIS" />
 <link rel="stylesheet" href="../style/greybox/greybox.css" type="text/css" media="all" charset="Shift_JIS" />
 <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />

</head>

<body>

<div id="header">

 <a href="../index.html">
  <img id="logo" src="../image/openhrp3banner.jpg" width="200" height="94" alt="OpenHRP3" title="OpenHRP3" />
 </a>

   <h1 class="title">Making periodically execute RT component synchronized with simulation time</h1><br>
   <div align="right"><a href="../jp/index.html">Japanese &gt;&gt;</a></div>
</div>


<div id="navigator"> 
<hr class="full_hr" /></div>


<div id="contents">
<table class="contents" width="100%" border="0" cellspacing="0" cellpadding="0">
 <tr>
  <td class="ltable" valign="top"><div id="menubar">

   <h2 id="h2_content_1">Introduction</h2>
    <ul class="menu">
     <li><a href="../en/index.html">Home</a></li>
     <li><a href="../en/about.html">About OpenHRP3</a></li>
     <li><a href="../en/download.html">Downloads</a></li>
    </ul>

   <h2 id="h2_content_2">Documents</h2>
    <ul class="menu">
     <li><a href="../en/install.html">Installation<br>(Ver.3.1.4)</a></li>
     <li><a href="../en/install_3_0.html">Installation<br>(Ver.3.0.8)</a></li>
     <li><a href="../en/users_manual.html">Users Manual<br>(Ver.3.1.4)</a></li>
     <li><a href="../en/users_manual_3_0.html">Users Manual<br>(Ver.3.0.8)</a></li>
     <li><a href="../en/programming.html">Programming Manual</a></li>

<!--
     <li><a href="../en/reference_manuals.html">Reference Manual</a></li>
-->
    </ul>

   <h2 id="h2_content_3">Supplements</h2>
    <ul class="menu">
     <li><a href="../en/samples.html">Sample Movies</a></li>
     <li><a href="../en/tips.html">Tips</a></li>
     <li><a href="../en/troubleshooting.html">Troubleshooting<br>(Ver.3.1)</a></li>
     <li><a href="../en/troubleshooting_3_0.html">Troubleshooting<br>(Ver.3.0)</a></li>
     <li><!--<a href="../en/known_bugs.html">-->Known Bugs<!--</a>--></li>
     <li><a href="../en/papers.html">Related Papers</a></li>
    </ul>

   <h2 id="h2_content_4">Support</h2>
    <ul class="menu">
     <li>
       <a href="../en/forum.html">Users Forum</a></li>
     </ul>


   <h2 id="h2_content_5">Related Sites</h2>
    <ul class="menu">
     <li><a href="http://www.openrtm.org/openrtm/en" target="_blank">OpenRTM-aist</a></li>
     <!--<li><a href="http://www.is.aist.go.jp/humanoid/openhrp/English/indexE.html" target="_blank">OpenHRP2 (prior version)</a></li>-->
    </ul>

   <h2 id="h2_content_2_0">Archived Docs</h2>
    <ul class="menu">
     <li><a href="../en/old_versions.html">OpenHRP3 Old Ver</a></li>

</div></td>

  <td class="ctable" valign="top">

   <div id="body">


<h2>Making periodically execute RT component synchronized with simulation time</h2>

<p>
In this section we describe how to make a periodically executing RT component to run synchronizing 
with the simulation time.This sample is placed at (OpenHRP installed directory)/share/OpenHRP-3.1/sample/example/simulationEC.
</p>

<h3>Configuring execution context</h3>

<p>
OpenHRP contains an execution context to implement periodical execution on an RT component that 
run synchronizing with the simulation time. This execution context is placed at following location.<br>
(On Windows, substitute <i>"libhrpRTM.so"</i> with <i>"libhrpRTM.dll"</i>)
</p>

<pre>
(OpenHRP installed directory)/lib/libhrpRTM.so
</pre>

<h4>Changing rtc.conf settings</h4>

<p>
Add following 3 lines to the configuration file used by RT component. Line1 declares that it uses 
execution context for simulation. And line2 specifies tha path to <i>"libhrpRTM.so"</i>.
</p>

<pre>
exec_cxt.periodic.type: SimulationEC
manager.modules.load_path: (OpenHRP installed directory)/lib
manager.modules.preload: SimulationEC.so
</pre>

<h3>Execution of the sample </h3>
<ol>
    <li>Start GrxUI and Create a Simulation item and a World State item .
    <li>Start SampleSimulationECComp. 
    <li>Activate a SampleSimulationECComp0 on RT System Editor. 
    <li>Start Simulation.
    <li>It is periodically displayed as "onExecute" on the window of SampleSimulationECComp.
</ol>


<h3>Warning</h3>

<ul>
 <li>When generating this execution context for simulation, registration process for GrxUI is also 
     performed. Therefore please beware to start the RT component that uses execution context, 
     after GrxUI.
 </li>
 <li>RT component's process starts when it comes to the right time of periodical execution, and the 
     simulation process goes to the wait state until the RT component finish its processing. Which means 
     despite how long it takes to finish the RT component's process, it is just one moment in 
     simulation world. Therefore, beware to set the execution-cycle-time of the RT component, longer 
     than the RT component's process time.
 </li>
</ul>








</div>
  </td>
 </tr>
</table>
</div>



<hr class="full_hr" />



<div id="footer">
<table id="footertable" border="0" cellspacing="0" cellpadding="0">
<tr>
 <td id="footerctable"><div id="sigunature">
  Administrator: OpenHRP Team, 
  Humanoid Research Group, Intelligent Systems Research Institute, AIST
 </div></td>
</tr>
</table>
</div>

</body>
</html>
